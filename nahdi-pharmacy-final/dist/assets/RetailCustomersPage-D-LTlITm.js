import{au as Z,av as ee,r as h,aw as te,ax as H,j as e}from"./index-CwyUHgjF.js";import{B as ae,P as se,A as re,C as G,Q as ne,l as oe,R as ie,F as le,E as ce,G as de,S as me,T as ue,U as fe,V as he}from"./index-BhmmswDf.js";import{r as xe}from"./index-Chjiymov.js";import{y as v}from"./index-CU1wCYg7.js";import{b as K,a as q,c as V,d as pe,f as Q}from"./format-DF3zju1I.js";var D={},Y;function ge(){if(Y)return D;Y=1,Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var d=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var m=arguments[a];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&(s[i]=m[i])}return s},C=(function(){function s(a,m){for(var i=0;i<m.length;i++){var r=m[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}return function(a,m,i){return m&&s(a.prototype,m),i&&s(a,i),a}})(),y,p;D.confirmAlert=N;var x=Z(),g=U(x),j=xe(),f=U(j),L=ee();function U(s){return s&&s.__esModule?s:{default:s}}function b(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function T(s,a){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:s}function _(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(s,a):s.__proto__=a)}var A=(p=y=(function(s){_(a,s);function a(){var m,i,r,S;b(this,a);for(var W=arguments.length,E=Array(W),M=0;M<W;M++)E[M]=arguments[M];return S=(i=(r=T(this,(m=a.__proto__||Object.getPrototypeOf(a)).call.apply(m,[this].concat(E))),r),r.handleClickButton=function(u){u.onClick&&u.onClick(),r.close()},r.handleClickOverlay=function(u){var t=r.props,n=t.closeOnClickOutside,c=t.onClickOutside,l=u.target===r.overlay;n&&l&&(c(),r.close()),u.stopPropagation()},r.close=function(){var u=r.props.afterClose;z(),I(r.props),B(u)},r.keyboard=function(u){var t=r.props,n=t.closeOnEscape,c=t.onKeypressEscape,l=t.onkeyPress,P=t.keyCodeForClose,F=u.keyCode,o=F===27;P.includes(F)&&r.close(),n&&o&&(c(u),r.close()),l&&l()},r.componentDidMount=function(){document.addEventListener("keydown",r.keyboard,!1)},r.componentWillUnmount=function(){document.removeEventListener("keydown",r.keyboard,!1),r.props.willUnmount()},r.renderCustomUI=function(){var u=r.props,t=u.title,n=u.message,c=u.buttons,l=u.customUI,P={title:t,message:n,buttons:c,onClose:r.close};return l(P)},i),T(r,S)}return C(a,[{key:"render",value:function(){var i=this,r=this.props,S=r.title,W=r.message,E=r.buttons,M=r.childrenElement,u=r.customUI,t=r.overlayClassName;return g.default.createElement("div",{className:"react-confirm-alert-overlay "+t,ref:function(c){return i.overlay=c},onClick:this.handleClickOverlay},g.default.createElement("div",{className:"react-confirm-alert"},u?this.renderCustomUI():g.default.createElement("div",{className:"react-confirm-alert-body"},S&&g.default.createElement("h1",null,S),W,M(),g.default.createElement("div",{className:"react-confirm-alert-button-group"},E.map(function(n,c){return g.default.createElement("button",d({key:c,className:n.className},n,{onClick:function(P){return i.handleClickButton(n)}}),n.label)})))))}}]),a})(x.Component),y.propTypes={title:f.default.string,message:f.default.string,buttons:f.default.array.isRequired,childrenElement:f.default.func,customUI:f.default.func,closeOnClickOutside:f.default.bool,closeOnEscape:f.default.bool,keyCodeForClose:f.default.arrayOf(f.default.number),willUnmount:f.default.func,afterClose:f.default.func,onClickOutside:f.default.func,onKeypressEscape:f.default.func,onkeyPress:f.default.func,overlayClassName:f.default.string},y.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},p);D.default=A;var O=null,k="react-confirm-alert";function $(){var s=document.getElementById("react-confirm-alert-firm-svg");if(!s){var a="http://www.w3.org/2000/svg",m=document.createElementNS(a,"feGaussianBlur");m.setAttribute("stdDeviation","0.3");var i=document.createElementNS(a,"filter");i.setAttribute("id","gaussian-blur"),i.appendChild(m);var r=document.createElementNS(a,"svg");r.setAttribute("id","react-confirm-alert-firm-svg"),r.setAttribute("class","react-confirm-alert-svg"),r.appendChild(i),document.body.appendChild(r)}}function B(s){var a=document.getElementById("react-confirm-alert-firm-svg");a&&a.parentNode.removeChild(a),document.body.children[0].classList.remove("react-confirm-alert-blur"),s()}function X(s){var a=document.getElementById(s.targetId||k);s.targetId&&!a&&console.error("React Confirm Alert:","Can not get element id (#"+s.targetId+")"),a?(O=(0,L.createRoot)(a),O.render(g.default.createElement(A,s))):(document.body.children[0].classList.add("react-confirm-alert-blur"),a=document.createElement("div"),a.id=k,document.body.appendChild(a),O=(0,L.createRoot)(a),O.render(g.default.createElement(A,s)))}function I(s){var a=document.getElementById(s.targetId||k);a&&O.unmount(a)}function R(){document.body.classList.add("react-confirm-alert-body-element")}function z(){document.body.classList.remove("react-confirm-alert-body-element")}function N(s){R(),$(),X(s)}return D}var ye=ge();const be={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},ve=(d,C,y)=>{const p=be[d];let x;return typeof p=="string"?x=p:C===1?x=p.one:C===2?x=p.two:C<=10?x=p.threeToTen.replace("{{count}}",String(C)):x=p.other.replace("{{count}}",String(C)),y!=null&&y.addSuffix?y.comparison&&y.comparison>0?"خلال "+x:"منذ "+x:x},we={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},je={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},Ne={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ce={date:K({formats:we,defaultWidth:"full"}),time:K({formats:je,defaultWidth:"full"}),dateTime:K({formats:Ne,defaultWidth:"full"})},ke={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},Ee=d=>ke[d],Pe={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},Te={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},_e={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},Oe={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},Me={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},Se={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},Fe=d=>String(d),Ae={ordinalNumber:Fe,era:q({values:Pe,defaultWidth:"wide"}),quarter:q({values:Te,defaultWidth:"wide",argumentCallback:d=>d-1}),month:q({values:_e,defaultWidth:"wide"}),day:q({values:Oe,defaultWidth:"wide"}),dayPeriod:q({values:Me,defaultWidth:"wide",formattingValues:Se,defaultFormattingWidth:"wide"})},Ie=/^(\d+)(th|st|nd|rd)?/i,Re=/\d+/i,We={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},De={any:[/قبل/,/بعد/]},Le={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},Ue={any:[/1/i,/2/i,/3/i,/4/i]},Be={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},He={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},qe={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},Ve={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},$e={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},Xe={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},ze={ordinalNumber:pe({matchPattern:Ie,parsePattern:Re,valueCallback:d=>parseInt(d,10)}),era:V({matchPatterns:We,defaultMatchWidth:"wide",parsePatterns:De,defaultParseWidth:"any"}),quarter:V({matchPatterns:Le,defaultMatchWidth:"wide",parsePatterns:Ue,defaultParseWidth:"any",valueCallback:d=>d+1}),month:V({matchPatterns:Be,defaultMatchWidth:"wide",parsePatterns:He,defaultParseWidth:"any"}),day:V({matchPatterns:qe,defaultMatchWidth:"wide",parsePatterns:Ve,defaultParseWidth:"any"}),dayPeriod:V({matchPatterns:$e,defaultMatchWidth:"any",parsePatterns:Xe,defaultParseWidth:"any"})},J={code:"ar",formatDistance:ve,formatLong:Ce,formatRelative:Ee,localize:Ae,match:ze,options:{weekStartsOn:6,firstWeekContainsDate:1}},Ze=()=>{const[d,C]=h.useState(""),[y,p]=h.useState([]),[x,g]=h.useState([]),[j,f]=h.useState(!0),[L,U]=h.useState(!1),[b,T]=h.useState(1),[_]=h.useState(10),[A,O]=h.useState(0),[k,$]=h.useState(1),{user:B}=te(),[X,I]=h.useState(!1),[R,z]=h.useState(null),[N,s]=h.useState(!1),[a,m]=h.useState({fullName:"",email:"",phone:"",isActive:!0}),i=h.useCallback(async()=>{var n,c,l,P,F;console.log("بدء جلب العملاء...",{page:b,limit:_,search:d,user:B==null?void 0:B.id}),f(!0);const t=v.loading("جاري تحميل بيانات العملاء...");try{const o=await H.getCustomers({page:b,limit:_,search:d,role:"customer"});if(console.log("تفاصيل استجابة العملاء:",{response:o,data:o==null?void 0:o.data,customers:(n=o==null?void 0:o.data)==null?void 0:n.customers,firstCustomer:(l=(c=o==null?void 0:o.data)==null?void 0:c.customers)==null?void 0:l[0]}),o.data&&Array.isArray(o.data.customers)){console.log("بيانات العميل الأول:",o.data.customers[0]),console.log("جميع الحقول المتاحة:",Object.keys(o.data.customers[0]||{})),console.log("استجابة API كاملة:",JSON.stringify(o.data,null,2));const w=o.data.customers[0];w&&(console.log("تحليل بيانات العميل الأول:",{id:w.id,full_name:w.full_name,email:w.email,phone:w.phone,date_of_birth:w.date_of_birth,birth_date:w.birth_date,birthdate:w.birthdate,dob:w.dob,allFields:Object.keys(w)}),console.log("جميع حقول العميل مع القيم:",w)),p(o.data.customers||[]),g(o.data.customers||[]),O(o.data.total||0),$(Math.ceil((o.data.total||0)/_)),v.update(t,{render:"تم تحميل بيانات العملاء بنجاح",type:"success",isLoading:!1,autoClose:3e3})}else console.warn("تنسيق البيانات غير متوقع:",o.data),p([]),g([]),O(0),$(1),v.update(t,{render:"تنسيق البيانات غير متوقع",type:"warning",isLoading:!1,autoClose:3e3})}catch(o){console.error("خطأ في جلب العملاء:",o),v.update(t,{render:o.code==="AUTH_REQUIRED"?"يجب تسجيل الدخول أولاً":"حدث خطأ أثناء جلب بيانات العملاء",type:"error",isLoading:!1,autoClose:5e3}),console.error("تفاصيل الخطأ:",{message:o.message,code:o.code,response:(P=o.response)==null?void 0:P.data,status:(F=o.response)==null?void 0:F.status})}finally{f(!1)}},[b,_,d]);h.useEffect(()=>{i()},[i]),h.useEffect(()=>{T(1)},[d]);const r=t=>{ye.confirmAlert({title:"تأكيد الحذف",message:"هل أنت متأكد من رغبتك في حذف هذا العميل؟",buttons:[{label:"نعم",onClick:async()=>{try{U(!0),await H.deleteCustomer(t),await i(),v.success("تم حذف العميل بنجاح")}catch(n){console.error("Error deleting customer:",n),v.error("حدث خطأ أثناء حذف العميل")}finally{U(!1)}}},{label:"لا",className:"cancel-btn",onClick:()=>{}}],closeOnEscape:!0,closeOnClickOutside:!0})},S=async(t,n)=>{try{await H.toggleCustomerStatus(t,!n);const c=y.map(l=>l.id===t?{...l,isActive:!n}:l);p(c),g(c),v.success(`تم ${n?"تعطيل":"تفعيل"} الحساب بنجاح`)}catch(c){console.error("Error toggling customer status:",c),v.error("حدث خطأ أثناء تغيير حالة الحساب")}},W=t=>{z(t),m({fullName:t.fullName||t.name||"",email:t.email||"",phone:t.phone||"",isActive:t.isActive!==void 0?t.isActive:!0}),I(!0)},E=t=>{const{name:n,value:c,type:l,checked:P}=t.target;m(F=>({...F,[n]:l==="checkbox"?P:c}))},M=async()=>{if(R)try{s(!0),await H.updateCustomer(R.id,a);const t=y.map(n=>n.id===R.id?{...n,...a}:n);p(t),g(t),I(!1),v.success("تم تحديث بيانات العميل بنجاح")}catch(t){console.error("خطأ في تحديث بيانات العميل:",t),v.error("حدث خطأ أثناء محاولة تحديث البيانات")}finally{s(!1)}},u=async(t="csv")=>{try{const n=await H.exportCustomers({format:t}),c=window.URL.createObjectURL(new Blob([n])),l=document.createElement("a");l.href=c,l.setAttribute("download",`customers_${new Date().toISOString().split("T")[0]}.${t}`),document.body.appendChild(l),l.click(),l.remove(),v.success("تم تصدير بيانات العملاء بنجاح")}catch(n){console.error("Error exporting customers:",n),v.error("حدث خطأ أثناء تصدير البيانات")}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"إدارة العملاء"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"عرض وإدارة حسابات عملاء المتجر"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 md:mt-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx(ae,{className:"text-gray-400"})}),e.jsx("input",{type:"text",className:"w-full md:w-64 pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ابحث عن عميل...",value:d,onChange:t=>C(t.target.value),disabled:j})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>u("csv"),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:j,children:[e.jsx(se,{className:"ml-2"}),"تصدير"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:j,children:[e.jsx(re,{className:"ml-2"}),"إضافة عميل"]})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:j?e.jsxs("div",{className:"flex justify-center items-center p-12",children:[e.jsx(G,{className:"animate-spin h-8 w-8 text-blue-500"}),e.jsx("span",{className:"mr-3",children:"جاري تحميل البيانات..."})]}):x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ne,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"لا يوجد عملاء"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:d?"لم يتم العثور على عملاء يطابقون بحثك.":"لم يتم العثور على عملاء مسجلين بعد."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"العميل"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"البريد الإلكتروني"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الهاتف"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"تاريخ الميلاد"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"تاريخ التسجيل"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"إجراءات"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.length>0?x.map(t=>e.jsxs("tr",{className:`${t.isActive?"hover:bg-gray-50":"bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex-shrink-0 h-10 w-10 flex items-center justify-center rounded-full ${t.isActive?"bg-green-100 text-green-600":"bg-gray-200 text-gray-500"}`,children:e.jsx(oe,{size:16})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.full_name||t.fullName||t.name||"لا يوجد اسم"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",t.id||"غير معروف"]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.email||"لا يوجد بريد إلكتروني"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.phone||"لا يوجد رقم هاتف"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.date_of_birth?Q(new Date(t.date_of_birth),"dd/MM/yyyy",{locale:J}):"غير محدد"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.created_at?Q(new Date(t.created_at),"dd/MM/yyyy",{locale:J}):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{onClick:()=>S(t.id,t.isActive),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium cursor-pointer ${t.isActive?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:t.isActive?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"ml-1 h-3 w-3"}),"نشط"]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"ml-1 h-3 w-3"}),"معطل"]})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 ml-4",onClick:()=>W(t),title:"تعديل بيانات العميل",children:e.jsx(ce,{})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>r(t.id),disabled:L,children:L?e.jsx(G,{className:"animate-spin"}):e.jsx(de,{})})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:"لا يوجد بيانات لعرضها"})})})]})}),e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>T(t=>Math.max(1,t-1)),disabled:b===1||j,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"}),e.jsx("button",{onClick:()=>T(t=>Math.min(k,t+1)),disabled:b===k||j,className:"mr-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["عرض ",e.jsx("span",{className:"font-medium",children:(b-1)*_+1})," إلى"," ",e.jsx("span",{className:"font-medium",children:Math.min(b*_,A)})," ","من ",e.jsx("span",{className:"font-medium",children:A})," عميل"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",dir:"ltr",children:[e.jsxs("button",{onClick:()=>T(t=>Math.max(1,t-1)),disabled:b===1||j,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"السابق"}),e.jsx(me,{className:"h-4 w-4"})]}),e.jsx("div",{className:"flex items-center px-4",children:e.jsxs("span",{className:"text-sm text-gray-700",children:["الصفحة ",b," من ",k]})}),e.jsxs("button",{onClick:()=>T(t=>Math.min(k,t+1)),disabled:b===k||j,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"التالي"}),e.jsx(ue,{className:"h-4 w-4"})]})]})})]})]})]})}),X&&R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"تعديل بيانات العميل"}),e.jsx("button",{onClick:()=>I(!1),className:"text-gray-500 hover:text-gray-700",disabled:N,children:e.jsx(fe,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم الكامل"}),e.jsx("input",{type:"text",name:"fullName",value:a.fullName,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الجوال"}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:N})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:a.isActive,onChange:E,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:N}),e.jsx("label",{htmlFor:"isActive",className:"mr-2 block text-sm text-gray-700",children:"الحساب مفعل"})]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>I(!1),className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:N,children:"إلغاء"}),e.jsx("button",{type:"button",onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"جاري الحفظ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"-ml-1 mr-2 h-4 w-4"}),"حفظ التغييرات"]})})]})]})})]})};export{Ze as default};
