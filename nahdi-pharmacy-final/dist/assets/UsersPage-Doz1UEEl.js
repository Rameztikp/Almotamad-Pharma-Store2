import{r as i,j as e,L as y}from"./index-BUkTSXir.js";import{q as L,i as U,r as $,s as E,t as D,n as P}from"./adminRoutes-CxNN_s_q.js";const R=()=>{const[o,d]=i.useState([]),[N,g]=i.useState(!0),[c,v]=i.useState(""),[x,w]=i.useState("all"),[m,k]=i.useState("all"),[a,F]=i.useState(1),h=10;i.useEffect(()=>{(async()=>{try{const s=["مدير","مشرف","عميل"],r=["نشط","غير نشط","موقوف"],n=Array(15).fill(0).map((T,p)=>({id:p+1,name:`مستخدم ${p+1}`,email:`user${p+1}@example.com`,phone:`+9665${Math.floor(1e7+Math.random()*9e7)}`,role:s[Math.floor(Math.random()*s.length)],status:r[Math.floor(Math.random()*r.length)],joinDate:new Date(Date.now()-Math.random()*365*24*60*60*1e3).toLocaleDateString("ar-EG")}));d(n),g(!1)}catch(s){console.error("Error fetching users:",s),g(!1)}})()},[]);const C=async(t,s)=>{const r=s==="نشط"?"موقوف":"نشط";try{d(o.map(n=>n.id===t?{...n,status:r}:n))}catch(n){console.error("Error updating user status:",n)}},S=async t=>{if(window.confirm("هل أنت متأكد من حذف هذا المستخدم؟ لا يمكن التراجع عن هذا الإجراء."))try{d(o.filter(s=>s.id!==t))}catch(s){console.error("Error deleting user:",s)}},f=o.filter(t=>{const s=t.name.toLowerCase().includes(c.toLowerCase())||t.email.toLowerCase().includes(c.toLowerCase())||t.phone.includes(c),r=x==="all"||t.role===x,n=m==="all"||t.status===m;return s&&r&&n}),j=a*h,M=j-h,b=f.slice(M,j),l=Math.ceil(f.length/h),u=t=>F(t);return N?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"إدارة المستخدمين"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"عرض وإدارة مستخدمي النظام"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsxs(y,{to:"/admin/users/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(L,{className:"ml-2 -mr-1"}),"إضافة مستخدم جديد"]})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700",children:"بحث"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(U,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",id:"search",className:"focus:ring-blue-500 focus:border-blue-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md p-2 border text-right",placeholder:"ابحث بالاسم أو البريد الإلكتروني أو الهاتف",value:c,onChange:t=>v(t.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"الدور"}),e.jsxs("select",{id:"role",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:x,onChange:t=>w(t.target.value),children:[e.jsx("option",{value:"all",children:"الكل"}),e.jsx("option",{value:"مدير",children:"مدير"}),e.jsx("option",{value:"مشرف",children:"مشرف"}),e.jsx("option",{value:"عميل",children:"عميل"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"الحالة"}),e.jsxs("select",{id:"status",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:m,onChange:t=>k(t.target.value),children:[e.jsx("option",{value:"all",children:"الكل"}),e.jsx("option",{value:"نشط",children:"نشط"}),e.jsx("option",{value:"غير نشط",children:"غير نشط"}),e.jsx("option",{value:"موقوف",children:"موقوف"})]})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:b.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الاسم"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"البريد الإلكتروني"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الهاتف"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الدور"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"تاريخ الانضمام"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"إجراءات"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600",children:t.name.charAt(0)})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",t.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.role==="مدير"?"bg-purple-100 text-purple-800":t.role==="مشرف"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:t.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="نشط"?"bg-green-100 text-green-800":t.status==="موقوف"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.joinDate}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[e.jsxs(y,{to:`/admin/users/edit/${t.id}`,className:"text-blue-600 hover:text-blue-900",children:[e.jsx($,{className:"inline ml-1"}),"تعديل"]}),e.jsx("button",{onClick:()=>C(t.id,t.status),className:`${t.status==="نشط"?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900"}`,children:t.status==="نشط"?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"inline ml-1"}),"تعطيل"]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"inline ml-1"}),"تفعيل"]})}),e.jsxs("button",{onClick:()=>S(t.id),className:"text-red-600 hover:text-red-900",children:[e.jsx(P,{className:"inline ml-1"}),"حذف"]})]})})]},t.id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:e.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"لا يوجد مستخدمون"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"لم يتم العثور على مستخدمين يتطابقون مع معايير البحث."})]})}),l>1&&e.jsx("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex-1 flex justify-between sm:justify-end",children:[e.jsx("button",{onClick:()=>u(a>1?a-1:1),disabled:a===1,className:`relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ${a===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"السابق"}),e.jsx("div",{className:"hidden md:flex",children:Array.from({length:Math.min(5,l)},(t,s)=>{let r;return l<=5||a<=3?r=s+1:a>=l-2?r=l-4+s:r=a-2+s,e.jsx("button",{onClick:()=>u(r),className:`${a===r?"bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} border-t-2 border-transparent px-4 pt-4 pb-3 text-sm font-medium`,children:r},s)})}),e.jsx("button",{onClick:()=>u(a<l?a+1:l),disabled:a===l,className:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ${a===l?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"التالي"})]})})]})};export{R as default};
